# 텔레그램 연동 설정 가이드

이 가이드는 에이치애드 웹사이트의 문의 폼을 구글 시트와 텔레그램으로 연동하는 방법을 설명합니다.

## 📋 필요한 준비물

1. **구글 계정**
2. **텔레그램 계정**
3. **구글 시트**
4. **텔레그램 봇**

## 🤖 1단계: 텔레그램 봇 생성

### 1.1 봇 생성
1. 텔레그램에서 `@BotFather` 검색
2. `/newbot` 명령어 입력
3. 봇 이름 입력 (예: "에이치애드 문의봇")
4. 봇 사용자명 입력 (예: "had_inquiry_bot")
5. 봇 토큰 복사 (예: `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)

### 1.2 채팅 ID 확인
1. 생성한 봇과 대화 시작
2. `@userinfobot` 검색하여 본인의 채팅 ID 확인
3. 채팅 ID 복사 (예: `123456789`)

## 📊 2단계: 구글 시트 설정

### 2.1 시트 생성
1. [Google Sheets](https://sheets.google.com) 접속
2. 새 스프레드시트 생성
3. 시트 이름을 "문의내역"으로 변경
4. 시트 ID 복사 (URL에서 `/d/`와 `/edit` 사이의 문자열)

### 2.2 앱스크립트 설정
1. 시트에서 `확장 프로그램` > `Apps Script` 클릭
2. `google-apps-script.js` 파일의 내용을 복사하여 붙여넣기
3. 다음 값들을 실제 값으로 교체:
   ```javascript
   const TELEGRAM_BOT_TOKEN = 'YOUR_BOT_TOKEN'; // 실제 봇 토큰
   const TELEGRAM_CHAT_ID = 'YOUR_CHAT_ID'; // 실제 채팅 ID
   const SHEET_ID = 'YOUR_SHEET_ID'; // 실제 시트 ID
   ```

### 2.3 앱스크립트 배포
1. `배포` > `새 배포` 클릭
2. 유형: `웹 앱` 선택
3. 실행: `나` 선택
4. 액세스: `모든 사용자` 선택
5. `배포` 클릭
6. 웹 앱 URL 복사

## 🔧 3단계: 웹사이트 연동

### 3.1 JavaScript 수정
`script.js` 파일에서 다음 부분을 수정:

```javascript
// 구글 시트 앱스크립트 URL (실제 URL로 교체 필요)
const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec';
```

`YOUR_SCRIPT_ID`를 실제 앱스크립트 URL의 ID로 교체

### 3.2 테스트
1. 웹사이트에서 문의 폼 작성
2. 제출 버튼 클릭
3. 구글 시트에 데이터가 저장되는지 확인
4. 텔레그램으로 메시지가 전송되는지 확인

## 📱 4단계: 텔레그램 메시지 확인

문의가 접수되면 다음과 같은 메시지가 텔레그램으로 전송됩니다:

```
🆕 새로운 문의가 접수되었습니다!

👤 이름: 홍길동
📞 연락처: 010-1234-5678
💬 내용: 마케팅 상담을 받고 싶습니다.
⏰ 접수시간: 2024. 1. 15. 오후 2:30:15

빠른 답변 부탁드립니다! 🙏
```

## 🛠️ 5단계: 추가 설정 (선택사항)

### 5.1 시트 초기화
앱스크립트 에디터에서 `initializeSheet` 함수를 실행하여 시트를 초기화할 수 있습니다.

### 5.2 메시지 커스터마이징
`sendToTelegram` 함수에서 메시지 형식을 원하는 대로 수정할 수 있습니다.

### 5.3 추가 필드
필요에 따라 문의 폼에 추가 필드를 넣고, 앱스크립트에서도 해당 필드를 처리하도록 수정할 수 있습니다.

## 🔒 보안 고려사항

1. **봇 토큰 보안**: 봇 토큰을 공개하지 마세요
2. **채팅 ID 보안**: 개인 채팅 ID를 공개하지 마세요
3. **시트 접근 권한**: 시트 접근 권한을 적절히 설정하세요

## 🐛 문제 해결

### 문의가 전송되지 않는 경우
1. 봇 토큰이 올바른지 확인
2. 채팅 ID가 올바른지 확인
3. 앱스크립트 URL이 올바른지 확인
4. 브라우저 개발자 도구에서 오류 메시지 확인

### 텔레그램 메시지가 오지 않는 경우
1. 봇과 대화를 시작했는지 확인
2. 봇이 차단되지 않았는지 확인
3. 앱스크립트 로그에서 오류 확인

### 시트에 데이터가 저장되지 않는 경우
1. 시트 ID가 올바른지 확인
2. 시트 접근 권한 확인
3. 앱스크립트 실행 권한 확인

## 📞 지원

설정 과정에서 문제가 발생하면:
- 이메일: csk092020@gmail.com
- 전화: 1660-4823

---

**성공적인 텔레그램 연동을 위해 각 단계를 차근차근 따라해주세요!** 🚀
